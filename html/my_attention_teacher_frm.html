<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
  <title>title</title>
  <link rel="stylesheet" type="text/css" href="../css/api.css" />
  <!-- <link rel="stylesheet" href="../css/aui.css">
  <link rel="stylesheet" href="../css/add.css"> -->
  <!-- <link rel="stylesheet" type="text/css" href="../css/common.css" /> -->
  <!-- <link rel="stylesheet" type="text/css" href="../css/attention_teacher.css" /> -->
  <style>
    body {
      padding-left: 8.267vw;
    }

    [v-cloak] {
      display: none
    }



    .teacher_area {
      position: relative;
      border-bottom: 0.133vw solid #dadada;
      height: 26.533vw;

    }

    .left_tx {
      float: left;
      position: relative;
      width: 18.4vw;
      height: 100%;
      margin-right: 3.867vw;


    }

    .left_tx .tx {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      width: 18.4vw;
      height: 18.4vw;
      border-radius: 50%;
      background-color: #666;
      overflow: hidden;


    }

    .left_tx .img {
      /* max-width: 100%; */
      max-height: 100%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .left_tx .vip {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      width: 18.4vw;
      height: 18.4vw;
    }

    .left_tx .vip img {
      width: 6.933vw;
      height: 3.467vw;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translate(-50%, 50%);
    }

    .msg {
      height: 100%;
      padding: 2.133vw 0;
    }

    .msg .top {
      padding: 2.667vw 0;
      font-size: 3.733vw;
      font-weight: 700;
      overflow: hidden;
    }

    .top .name {
      float: left;
    }



    .star {
      float: left;
      margin-left: 2.667vw;
    }

    .star img {
      height: 2.667vw;
    }

    .cont {
      font-size: 2.133vw;
      height: 3.333vw;
      line-height: 3.333vw;
      color: #fff
    }

    .cont .kecheng {
      float: left;
      height: 100%;
      padding: 0 1.2vw;
      background-image: linear-gradient(to bottom, #5bbbff, #289bff);
      text-align: center;
      margin-right: 2.667vw;
      border-radius: 0.8vw;

    }

    .cont .jifen {
      float: left;
      height: 100%;
      padding: 0 1.2vw;
      background-image: linear-gradient(to bottom, #5bbbff, #289bff);
      border-radius: 0.8vw;
    }

    .bottom div {
      float: left;
      font-size: 2.4vw;
      margin-top: 3.067vw;
      color: #a7a7a7;
      margin-right: 4vw;
    }

    .bottom div span {
      font-size: 3.467vw;
      color: #2398ff;
      padding-right: 1.067vw;
    }

    .guanzhu {
      width: 16.267vw;
      height: 6.667vw;
      box-sizing: border-box;
      border: 0.267vw solid #2397ff;
      border-radius: 2vw;
      position: absolute;
      top: 50%;
      right: 5.333vw;
      transform: translateY(-50%);
      line-height: 6.667vw;
      text-align: center;
      font-size: 3.467vw;
      color: #2397ff;
    }

    /* .vip {
      background-color: #fff;
    } */
  </style>
</head>

<body>
  <div id='wrap2'>

    <!-- <div class="space_border"></div>
    <p style="text-align:center;color:#666;font-size:4vw;" v-if='followList.data&&followList.data.length==0'>暂无数据</p> -->
    <div class="teacher_area" v-for="item,index in followList.data" @click="turnTD(item)">
      <!-- 头像 -->
      <div class="left_tx">
        <div class="tx"><img :src="item.avatar" style='width:100%;height:100%;' alt=""></div>
        <div class="vip">
          <img src="../image/iconimg/vip1.png" alt="" style="background-color: #fff;border-radius: 1.5vw;">
          <img src="../image/iconimg/vip.png" alt="" style="background-color: #fff;border-radius: 1.5vw;">
        </div>
      </div>
      <!-- 信息 -->
      <div class="msg">
        <div class="top">
          <!-- 昵称 -->
          <div class="name">{{item.nickname}}</div>
          <!-- 星级 -->
          <div class="star">
            <img src="../image/star/1.1.png" alt="" v-if="item.score>1&&item.score<=1000">
            <img src="../image/star/1.2.png" alt="" v-if="item.score>1000&&item.score<=5000">
            <img src="../image/star/1.3.png" alt="" v-if="item.score>5000&&item.score<=10000">
            <img src="../image/star/1.4.png" alt="" v-if="item.score>10000&&item.score<=15000">
            <img src="../image/star/1.5.png" alt="" v-if="item.score>15000&&item.score<=25000">
            <img src="../image/star/2.1.png" alt="" v-if="item.score>25000&&item.score<=35000">
            <img src="../image/star/2.2.png" alt="" v-if="item.score>35000&&item.score<=45000">
            <img src="../image/star/2.3.png" alt="" v-if="item.score>45000&&item.score<=60000">
            <img src="../image/star/2.4.png" alt="" v-if="item.score>60000&&item.score<=75000">
            <img src="../image/star/2.5.png" alt="" v-if="item.score>75000&&item.score<=95000">
            <img src="../image/star/3.1.png" alt="" v-if="item.score>95000&&item.score<=115000">
            <img src="../image/star/3.2.png" alt="" v-if="item.score>115000&&item.score<=135000">
            <img src="../image/star/3.3.png" alt="" v-if="item.score>135000&&item.score<=155000">
            <img src="../image/star/3.4.png" alt="" v-if="item.score>155000&&item.score<=180000">
            <img src="../image/star/3.5.png" alt="" v-if="item.score>180000&&item.score<=210000">
            <img src="../image/star/4.1.png" alt="" v-if="item.score>210000&&item.score<=240000">
            <img src="../image/star/4.2.png" alt="" v-if="item.score>240000&&item.score<=270000">
            <img src="../image/star/4.3.png" alt="" v-if="item.score>270000&&item.score<=310000">
            <img src="../image/star/4.4.png" alt="" v-if="item.score>310000&&item.score<=350000">
            <img src="../image/star/4.5.png" alt="" v-if="item.score>350000&&item.score<=390000">
            <img src="../image/star/5.1.png" alt="" v-if="item.score>390000&&item.score<=440000">
            <img src="../image/star/5.2.png" alt="" v-if="item.score>440000&&item.score<=490000">
            <img src="../image/star/5.3.png" alt="" v-if="item.score>490000&&item.score<=540000">
            <img src="../image/star/5.4.png" alt="" v-if="item.score>540000&&item.score<=590000">
            <img src="../image/star/5.5.png" alt="" v-if="item.score>590000&&item.score<=640000">
            <img src="../image/star/6.1.png" alt="" v-if="item.score>640000&&item.score<=720000">
            <img src="../image/star/6.2.png" alt="" v-if="item.score>720000&&item.score<=800000">
            <img src="../image/star/6.3.png" alt="" v-if="item.score>800000&&item.score<=880000">
            <img src="../image/star/6.4.png" alt="" v-if="item.score>880000&&item.score<=960000">
            <img src="../image/star/6.5.png" alt="" v-if="item.score>960000&&item.score<=1020000">
            <img src="../image/star/7.1.png" alt="" v-if="item.score>1020000&&item.score<=1120000">
            <img src="../image/star/7.2.png" alt="" v-if="item.score>1120000&&item.score<=1220000">
            <img src="../image/star/7.3.png" alt="" v-if="item.score>1220000&&item.score<=1320000">
            <img src="../image/star/7.4.png" alt="" v-if="item.score>1320000&&item.score<=1420000">
            <img src="../image/star/7.5.png" alt="" v-if="item.score>1420000&&item.score<=1520000">

          </div>

        </div>
        <div class="cont">
          <div class="kecheng">
            面试
          </div>
          <div class="jifen">
            积分：{{item.score}}
          </div>
        </div>
        <div class="bottom">
          <div class="kc">
            <span>{{item.course_num}}</span>课程
          </div>
          <div class="shj">
            <span>{{item.paper_num}}</span>试卷
          </div>
          <div class="fans">
            <span>{{item.follow_num}}</span>粉丝
          </div>
        </div>

      </div>
      <!-- 关注 -->
      <div class="guanzhu" @click.stop='follow(index)' :style='item.text==1?"background-color: #2397ff;color:#fff;":""'>
        {{item.text==1?'取消关注':'+关注'}}
      </div>


      <!-- <div class="top_area">
        
        <div class="teacher_img"><img :src="item.avatar" style='width:100%;height:100%;' alt=""></div>
        <div class="teacher_right">
          <div class="right_line1 f_row_sb">
            <div style="font-size:3.5vw; " v-cloak>{{item.nickname}}
              <div class="f_c" v-if="item.level==1">
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==2">
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==3">
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==4">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==5">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==6">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==7">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==8">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==9">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==10">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==11">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==12">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==13">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx2"></span>
              </div>
              <div class="f_c" v-if="item.level==14">
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
                <span class="on_xx"></span>
              </div>
              <div class="f_c" v-if="item.level==15">
                <span class="on_h1"></span>
              </div>
              <div class="f_c" v-if="item.level==16">
                <span class="on_h1"></span>
                <span class="on_h1"></span>
              </div>
              <div class="f_c" v-if="item.level==17">
                <span class="on_h1"></span>
                <span class="on_h1"></span>
                <span class="on_h1"></span>
              </div>
              <div class="f_c" v-if="item.level==18">
                <span class="on_h2"></span>
              </div>
              <div class="f_c" v-if="item.level==19">
                <span class="on_h2"></span>
                <span class="on_h2"></span>
              </div>
              <div class="f_c" v-if="item.level==20">
                <span class="on_h2"></span>
                <span class="on_h2"></span>
                <span class="on_h2"></span>
              </div>
              <div class="f_c" v-if="item.level==21">
                <span class="on_h3"></span>
              </div>
              <div class="f_c" v-if="item.level==22">
                <span class="on_h3"></span>
                <span class="on_h3"></span>
              </div>
              <div class="f_c" v-if="item.level==23">
                <span class="on_h3"></span>
                <span class="on_h3"></span>
                <span class="on_h3"></span>
              </div>
              <div class="f_c" v-if="item.level==24">
                <span class="on_h4"></span>
              </div>
              <div class="f_c" v-if="item.level==25">
                <span class="on_h4"></span>
                <span class="on_h4"></span>
              </div>
              <div class="f_c" v-if="item.level==26">
                <span class="on_h4"></span>
                <span class="on_h4"></span>
                <span class="on_h4"></span>
              </div>
            </div>
            <div>
              <span style="color:#999999;font-size: 3vw;">粉丝:<span
                  style="color:#ff8542;">{{item.follow_num}}</span></span>
              <span class="atteneion" @click.stop='follow(index)'
                :style='item.text==1?"background-color: #017be3;color:#fff;":""'>{{item.text==1?'已关注':'关注'}}</span>
            </div>
          </div>
          <div class="right_line2">
            {{item.signature}}
          </div>
        </div>
      </div>
      <div class="bottom_area">
        <div class="bottom_item" @click='navCourse(index)'>
          <div class="icon"><i class="icon_del kc_icon img"></i></div>
          <div style="margin-left:3vw;">他的课程</div>
          <div style="color:#999999">（{{item.course_num}}个）</div>
        </div>
        <div class="bottom_item" style="border:none;" @click='navtopic(index)'>
          <div class="icon" style="margin-left:2vw;"><i class="icon_del kc_icon img"></i></div>
          <div style="margin-left:2vw;">他的试卷</div>
          <div style="color:#999999">（{{item.paper_num}}个）</div>
        </div>
      </div> -->
    </div>
  </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/vue.js"></script>
<script src="../script/jquery.min.js"></script>
<script src="../script/configUtil.js" charset="utf-8"></script>
<script src="../script/util.js" charset="utf-8"></script>
<script type="text/javascript">
  apiready = function () {
    api.setStatusBarStyle({
      style: 'dark',
    })
    var vm = new Vue({
      el: "#wrap2",
      data: {
        followList: {
          page: 1,
          data: []
        },
        userinfo: $api.getStorage('userinfo') == null ? '' : $api.getStorage('userinfo'),
      },
      mounted: function () {
        var header = document.querySelector('#header');
        $api.fixStatusBar(header);
        this.initdata();
        this.scrolltobottom();
      },
      methods: {
        openW(name, param, slidBack, reload, bounces) {

          api.openWin({
            useWKWebView: true,
            name: name,
            url: 'widget://html/' + name + '.html',
            pageParam: param,
            slidBackEnabled: slidBack,
            reload: reload != undefined ? reload : false,
            bounces: bounces != undefined ? bounces : true,
            allowEdit: true
          })
        },
        getteachertype(type) {
          if (type == 1) {
            return ' 学士'
          }
          if (type == 2) {
            return ' 硕士'
          }
          if (type == 3) {
            return ' 博士'
          }
        },
        getteacherdip(type) {
          if (type == 1) {
            return ' 教师资质'
          }
          if (type == 2) {
            return ' 考研通教师资质'
          }
        },
        turnTD(item) {
          var that = this;
          var data = {
            teacher_id: item.teacher_id
          }
          that.ajaxpost('post', globalData.teacherFollow, data).then((res) => {
            var res = $.parseJSON(res);
            res.data.status1 = that.getteacherdip(res.data.teachertype);
            res.data.status2 = that.getteachertype(res.data.dip);
            alert(JSON.stringify(res))
            if (res.data.is_real_teacher == 1) {
              res.data.status = '已认证';
            }
            if (res.data.isVip == 1) {
              this.is_vip = 2;
            }
            res.data.status.level = item.level;
            alert(JSON.stringify(res.data))
            that.openW('teacher_dtl', {
              info: res.data
            }, true, null, false);
            // api.openWin({
            //     name: name,
            //     url: 'widget://html/teacher_dtl.html',
            //     pageParam: {info:res.data},
            //     slidBackEnabled:true,
            //     reload:false,
            //     bounces:false,
            //     allowEdit:true
            // })
          }).catch((ret) => {
            loginfo(ret)
          })
        },
        //上拉
        scrolltobottom() {
          var that = this;
          console.log(22)
          api.addEventListener({
            name: 'scrolltobottom',
            extra: {
              threshold: 50 //距离底部距离
            }
          }, function (ret, err) {
            // listAjax(true);
            console.log(JSON.stringify(ret))
            that.followList.page += 1;
            that.initdata()
          });
        },
        //试卷
        navtopic(index) {
          var data = {
            teacher_id: this.followList.data[index].teacher_id,
          }
          this.openW('find_testPaper_win', data, true)
        },

        //老师课程
        navCourse(index) {
          var data = {
            teacher_id: this.followList.data[index].teacher_id
          }
          this.openW('course_h', data, true)
        },
        //关注
        follow(index) {
          var that = this;
          console.log(11)
          var data = {

            teacher_id: that.followList.data[index].teacher_id
          }
          if (that.followList.data[index].text == 1) {
            that.followList.data[index].follow_num -= 1
            that.followList.data[index].text = 0;
            that.ajaxpost('post', globalData.follow, data).then((res) => {
              var res = $.parseJSON(res);
              console.log(JSON.stringify(res))
              if (res.code == 1) {
                that.toast(res.msg)
              }
            }).catch((ret) => {
              loginfo(ret)
            })
          } else {
            that.followList.data[index].follow_num += 1
            that.followList.data[index].text = 1;
            api.confirm({
              title: '提示',
              msg: '是否向该老师公开手机号',
              buttons: ['确定', '取消']
            }, function (ret, err) {
              var index = ret.buttonIndex;
              if (index == 1) {
                data.is_show_mobile = 1;
                that.ajaxpost('post', globalData.follow, data).then((res) => {
                  var res = $.parseJSON(res);
                  console.log(JSON.stringify(res))
                  if (res.code == 1) {
                    that.toast(res.msg)
                  }
                }).catch((ret) => {
                  loginfo(ret)
                })
              } else {
                data.is_show_mobile = 0;
                that.ajaxpost('post', globalData.follow, data).then((res) => {
                  var res = $.parseJSON(res);
                  console.log(JSON.stringify(res))
                  if (res.code == 1) {
                    that.toast(res.msg)
                  }
                }).catch((ret) => {
                  loginfo(ret)
                })
              }
            })
          }

        },
        //
        initdata() {
          var that = this;
          var data = {

            page: that.followList.page,
            limit: 10
          }
          that.ajaxpost('post', globalData.followList, data).then((res) => {

            var res = $.parseJSON(res);
            if (res.code == 1 && res.data.data) {
              var list = res.data.data;
              for (let i = 0; i < list.length; i++) {
                getLevel(list[i].score, function (level) {
                  list[i].level = level;
                  if (i == list.length - 1) {
                    that.followList.data = that.followList.data.concat(list)
                  }
                })
              }
            }

          }).catch((ret) => {
            loginfo(ret)
          })
        },
      }
    });
  };
</script>

</html>