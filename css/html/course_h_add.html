<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport"
		content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
	<title></title>
	<link rel="stylesheet" type="text/css" href="../css/api.css" />
	<link rel="stylesheet" type="text/css" href="../css/aui.css">
	<link rel="stylesheet" type="text/css" href="../css/common.css" />
	<link rel="stylesheet" type="text/css" href="../css/school_guide.css" />
	<style>
		body {}

		.menu_navs {
			padding: 0 3.5vw;
			position: relative;
		}

		.menu_nav {
			/*width: 18vw;*/
		}

		.curriculum_h_content {
			padding: 0 2vw;
		}

		.curriculum_h_wrap {
			margin: 2vw 0;
			border-radius: 2vw;
			background-color: #fff;
			padding: 3vw;
		}

		.curriculum_h_body {
			display: flex;
			padding: 3vw 0;
			justify-content: flex-start;
			border-bottom: 1px solid #eee;
		}

		.curriculum_h_img img {
			width: 100%;
			height: 30vw;
			border-radius: 2vw;
		}

		.curriculum_h_hot {
			width: 40vw;
			display: flex;
			padding-left: 2vw;
			flex-direction: column;
			justify-content: space-between;
		}

		.curriculum_h_hotTop {
			display: flex;
			font-size: 3.5vw;
			align-items: center;
			justify-content: space-between;
		}

		.curriculum_h_hotTop h2 {
			font-size: 4vw;
		}

		.curriculum_h_hotTop i {
			color: #999;
		}

		.curriculum_h_tip {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding-top: 2vw;
		}

		.curriculum_h_tip .oncolor999 {
			font-size: 3vw;
			color: #999999;
		}

		.oncolor999 {
			color: #666666;
		}


		.curriculum_h_tip .oncolor {
			background-color: #edf3ff;
			margin-right: 2vw;
			padding: 0.4vw 0.4vw 0.4vw 0.4vw;
			box-sizing: border-box;
			border-radius: 0.4vw;
			color: #4D76C9;
			font-size: 3vw;
		}

		.top_arrow {
			display: inline-block;
			width: 2.2vw;
			height: 3.1vw;
			background: url(../image/t_arrow.png) 0 0 no-repeat;
			background-size: 100% 100%;
			margin-left: 1vw;
		}

		.bottom_arrow {
			display: inline-block;
			width: 2.2vw;
			height: 3.1vw;
			background: url(../image/b_arrow.png) 0 0 no-repeat;
			background-size: 100% 100%;
			margin-left: 1vw;
		}

		.oncolor000 {
			width: 25vw;
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.on_xx {
			width: 3vw;
			height: 3vw;
			display: inline-block;
			background: url(../image/stars.png) 0 0 no-repeat;
			background-size: 100% 100%;
			-webkit-background-size: 100% 100%;
			margin-left: 1vw;
		}

		.oncolorRed {
			color: #FF0000;
		}

		#header {
			background-color: #fff;
		}

		#header .aui-title {
			color: #000;
		}

		#header .aui-icon-left {
			color: #000
		}

		#header .aui-searchbar {
			background-color: #fff;
		}

		#header .aui-searchbar-input {
			background-color: #ebeced;
		}

		.curriculum_h_img {
			width: 60vw;

		}

		.aui-searchbar-input input::-webkit-input-placeholder {
			color: #666;
		}

		#header .aui-title .aui-icon-search {
			font-size: 0.8rem;
		}

		#header .aui-searchbar-input {
			border-radius: 100px;
		}
	</style>
</head>

<body>
	<div id='wrap2'>
		<header id='header' class="aui-bar aui-bar-nav">
			<div v-if="!from" class="aui-pull-left aui-btn" @click='closeW'>
				<span class="aui-iconfont aui-icon-left"></span>
			</div>
			<div v-if="from" class="aui-pull-left aui-btn" @click='returnIndex'>
				<span class="aui-iconfont aui-icon-left"></span>
			</div>
			<div class="aui-title" style="left:2rem; right: 2rem;">
				<div class="aui-searchbar">
					<div class="aui-searchbar-input aui-border-radius">
						<i class="aui-iconfont aui-icon-search"></i>
						<input type="search" v-model='TabFengl.keyword' placeholder="请输入搜索内容" id="search-input">
						<div class="aui-searchbar-clear-btn">
							<i class="aui-iconfont aui-icon-close"></i>
						</div>
					</div>
				</div>
			</div>
			<div class="aui-pull-right aui-btn" style="color:#000;" @click='changeschool(0)'>
				<span>搜索</span>
			</div>
		</header>
		<div class="menu_navs" style="border-top:1px solid #f2f2f2;" style="position:absolute;bottom:0;">
			<div class="menu_nav">

				<select v-model='TabFengl.screenid' @change='changeschool(0)'>
					<option v-for='item in TabFengl.screendata' v-bind:value="item.id">{{item.title}}</option>
				</select>
				<div class="down_icon"></div>
			</div>
			<div class="menu_nav">
				<div @click='clickchoose(1)'>
					<span>时间<i :class="sort_1=='desc'?'bottom_arrow':'top_arrow'"></i></span>
				</div>

			</div>
			<div class="menu_nav">
				<div @click='clickchoose(2)'>
					<span>价格<i :class="sort_2=='desc'?'bottom_arrow':'top_arrow'"></i></span>
				</div>

			</div>
			<div class="menu_nav">
				<div @click='clickchoose(3)'>
					<span>评价<i :class="sort_3=='desc'?'bottom_arrow':'top_arrow'"></i></span>
				</div>

			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script src="../script/jquery.min.js"></script>
<script type="text/javascript" src="../script/vue.js"></script>
<script src="../script/configUtil.js" charset="utf-8"></script>
<script type="text/javascript">

	apiready = function () {
		api.setStatusBarStyle({
				style: 'dark',
		})
        var header = document.querySelector('#header');
        $api.fixStatusBar(header);
		var vm = new Vue({
			el: "#wrap2",
			data: {
				TabFengl: {
					keyword: '',
					screenid: '',
					screendata: [],
					typecurrtent: 1,
					typesort: 'desc',
					page: 1
				},
				sort_1: 'desc',
				sort_2: 'desc',
				sort_3: 'desc',
				schooldata: [],
				shenheStaus: 0,
				from:api.pageParam.from
			},
			mounted: function () {
					if(api.pageParam.from){
						api.addEventListener({
							name : 'keyback'
						}, function(ret, err) {
							api.closeToWin({
									 name: 'root'
							})
					 });
					}
				var that = this;
				api.openFrame({
					useWKWebView:true,
                    name: 'course_add',
                    url: './course_add.html',
                    rect: {
                        x: 0,
                        y: $('#header').height() + api.safeArea.top + $('.menu_navs').height(),
                        w: 'auto',
                        h: api.winHeight - $('#header').height() - api.safeArea.top - $('.menu_navs').height()
                    },
					pageParam: api.pageParam
				});
				setTimeout(function(){
					that.bindscreendataFl()
				},200)
			},
			methods: {
				returnIndex(){
					api.closeToWin({
							 name: 'root'
					})
				},
				//关闭
				closew() {
					this.closeW()

				},
				//list
				changeschool(index, typesort) {
					var that = this;
					api.sendEvent({
						name: 'changeschool',
						extra: {
							index: index,
							typesort: typesort,
							category_id: that.TabFengl.screenid,
							keyword: that.TabFengl.keyword,
							page: that.TabFengl.page,
						}
					});
					// var that = this;
					// if (index == 0) {
					// 	index = index + 1;
					// 	that.schooldata = []
					// 	that.TabFengl.page = 1
					// }
					// var data = {

					// 	category_id: that.TabFengl.screenid,
					// 	keyword: that.TabFengl.keyword,
					// 	sort_type: index,
					// 	teacher_id: that.teacher_id,
					// 	sort_order: typesort ? typesort : 'desc',
					// 	page: that.TabFengl.page,
					// 	page_size: 10
					// }
					// console.log(JSON.stringify(data))
					// that.ajaxpost('post', that.type == 1 ? globalData.getMyCourseList : globalData.getCourseList, data).then((res) => {
					// 	var res = $.parseJSON(res);
					// 	console.log(JSON.stringify(res))
					// 	res.data.data.map((item) => {
					// 		item.createtime = that.formatTime(item.createtime)
					// 	})
					// 	var res = that.schooldata.concat(res.data.data)
					// 	that.schooldata = res
					// 	// that.bindlist(0);
					// }).catch((ret) => {
					// 	loginfo(ret)
					// })
				},
				//排序
				clickchoose(index) {
					var that = this;
					var typesort;
					that.typecurrtent = index
					that.TabFengl.page = 1
					that.schooldata = []
					if (index == 1) {

						that.sort_1 = that.sort_1 == 'desc' ? 'asc' : 'desc'
						that.sort_2 = 'desc'
						that.sort_3 = 'desc'
						typesort = that.sort_1
					}
					if (index == 2) {
						that.sort_2 = that.sort_2 == 'desc' ? 'asc' : 'desc'
						that.sort_1 = 'desc'
						that.sort_3 = 'desc'
						typesort = that.sort_2
					}
					if (index == 3) {
						that.sort_3 = that.sort_3 == 'desc' ? 'asc' : 'desc'
						that.sort_1 = 'desc'
						that.sort_2 = 'desc'
						typesort = that.sort_3
					}
					that.typesort = typesort
					that.changeschool(index, typesort)
				},
				//类型
				bindscreendataFl() {
					var that = this;
					var data = {
						school: 1
					}
					that.ajaxpost('post', globalData.getCourseCategoryAll, data).then((res) => {
						var res = $.parseJSON(res);
						var whole = {
							title: '全部',
							disabled: true,
							id: ''
						}
						res.data.unshift(whole);
						var ids = api.pageParam.Flid
						if (ids == -1 || !ids) {
							that.TabFengl.screenid = res.data[0].id;
						} else {
							that.TabFengl.screenid = ids
						}

						that.TabFengl.screendata = res.data
						that.changeschool(1);
						// that.bindlist(0);
					}).catch((ret) => {
						loginfo(ret)
					})
				},
			}
		});
	};
</script>

</html>
